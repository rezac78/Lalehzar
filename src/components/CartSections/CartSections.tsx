import PartImage from '../Shared/PartImag/PartImage';
import { Menu, Hashtag } from '@/types/auth';
interface CartSectionsProps {
        Data: Menu[];
        Hashtag: Hashtag[];
}
export default function CartSections(props: CartSectionsProps) {
        const formatPrice = (price: string) => {
                return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        };
        const renderProductsByHashtag = (hashtag: string) => {
                return props.Data
                        .filter(product => product.hashtags.includes(hashtag))
                        .map(product => (
                                <div key={product._id} className="flex flex-wrap w-11/12 sm:w-9/12 md:w-2/5 xl:w-[30%] h-44 sm:h-40 md:h-36 xl:h-48 bg-cardBackgroundColor shadow-lg rounded-lg overflow-hidden my-5">
                                        <div className="w-1/3 sm:w-2/5 flex justify-center">
                                                <div className="aspect-w-1 aspect-h-1 w-full relative">
                                                        <PartImage src={product.photo} className="absolute w-full sm:w-9/12 h-full" width={800} height={500} />
                                                </div>
                                        </div>
                                        <div className="w-2/3 sm:w-3/5 p-4 flex flex-col justify-between">
                                                <div>
                                                        <h2 className="text-lg font-bold text-titleColor">{product.title}</h2>
                                                        <p className="text-sm text-textColor">{product.description}</p>
                                                </div>
                                                <div className="flex justify-between items-end mt-4">
                                                        <div className="flex">
                                                                <span className="text-lg font-bold text-black">{formatPrice(product.price)}</span>
                                                                <svg className="mr-1 mt-1" width="21" height="21" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="M6.954 9.115C7.16933 9.115 7.32767 9.10867 7.429 9.096C7.657 9.07067 7.828 9.04533 7.942 9.02C8.14467 8.99467 8.31567 8.96933 8.455 8.944L8.683 8.868L8.911 8.811L9.063 8.754C9.139 8.72867 9.20867 8.70333 9.272 8.678C9.348 8.65267 9.44933 8.61467 9.576 8.564L9.994 8.355L10.279 8.184H10.26C10.3613 8.13333 10.4563 8.06367 10.545 7.975L10.621 7.899C10.6843 7.823 10.7223 7.766 10.735 7.728C10.7983 7.63933 10.8617 7.538 10.925 7.424C10.963 7.36067 11.0073 7.26567 11.058 7.139C11.0707 7.07567 11.1023 6.968 11.153 6.816C11.1783 6.68933 11.191 6.57533 11.191 6.474L11.21 6.436C11.2353 6.284 11.248 6.17 11.248 6.094L11.229 5.144C11.229 5.00467 11.2163 4.79567 11.191 4.517C11.1657 4.20033 11.1403 3.95967 11.115 3.795L11.02 3.13L11.058 3.225L10.811 1.819C10.7477 1.48967 10.659 1.09067 10.545 0.621999L10.602 0.887999L9.481 1.154C9.481 1.23 9.5 1.35667 9.538 1.534L9.671 2.18C9.75967 2.56 9.82933 2.93367 9.88 3.301L10.07 4.555V4.707C10.108 4.90967 10.127 5.11867 10.127 5.334C10.1397 5.46067 10.146 5.64433 10.146 5.885V6.474L10.089 6.721L10.051 6.949L9.557 7.234L9.424 7.272C9.348 7.31 9.234 7.35433 9.082 7.405L8.702 7.519C8.626 7.53167 8.49933 7.56333 8.322 7.614C8.246 7.63933 8.11933 7.66467 7.942 7.69H7.904C7.81533 7.69 7.68233 7.70267 7.505 7.728C7.41633 7.74067 7.277 7.747 7.087 7.747C6.71967 7.747 6.384 7.709 6.08 7.633C5.78867 7.557 5.53533 7.43667 5.32 7.272C5.11733 7.13267 4.95267 6.93633 4.826 6.683C4.712 6.42967 4.655 6.14467 4.655 5.828C4.655 5.61267 4.674 5.372 4.712 5.106C4.75 4.878 4.81967 4.593 4.921 4.251C4.97167 4.04833 5.06033 3.73167 5.187 3.301C5.301 2.97167 5.415 2.62967 5.529 2.275L4.674 1.952L4.256 3.206L3.933 4.289C3.895 4.479 3.84433 4.745 3.781 5.087L3.743 5.258C3.705 5.562 3.686 5.85967 3.686 6.151C3.686 6.69567 3.75567 7.13267 3.895 7.462C4.02167 7.81667 4.237 8.127 4.541 8.393C4.807 8.621 5.149 8.80467 5.567 8.944C5.97233 9.058 6.43467 9.115 6.954 9.115ZM7.467 5.448L8.398 4.517L7.467 3.548L6.517 4.517L7.467 5.448ZM17.347 8.26L18.297 7.329L17.347 6.379L16.416 7.329L17.347 8.26ZM9.101 16.088C9.22767 16.088 9.34167 16.0627 9.443 16.012C9.50633 15.9867 9.56967 15.955 9.633 15.917L9.709 15.86C9.823 15.7713 9.90533 15.6827 9.956 15.594C10.0573 15.4673 10.127 15.366 10.165 15.29C10.203 15.214 10.2473 15.1 10.298 14.948C10.336 14.834 10.374 14.701 10.412 14.549C10.412 14.4857 10.4247 14.3843 10.45 14.245V14.188C10.4627 14.0993 10.469 13.96 10.469 13.77C10.469 13.4913 10.4563 13.2887 10.431 13.162L10.317 12.592V12.63C10.2537 12.402 10.1903 12.231 10.127 12.117L9.861 11.661C9.79767 11.585 9.69 11.471 9.538 11.319C9.41133 11.2177 9.28467 11.129 9.158 11.053H9.139C9.07567 11.015 8.97433 10.9707 8.835 10.92L8.721 10.882C8.59433 10.8567 8.493 10.844 8.417 10.844L8.227 10.825C8.151 10.825 8.03067 10.844 7.866 10.882L7.809 10.901L7.562 11.015L7.448 11.091L7.068 11.395L6.726 11.756L6.08 12.649C6.042 12.7123 5.966 12.8137 5.852 12.953L5.396 13.523C5.30733 13.6117 5.17433 13.732 4.997 13.884C4.87033 13.9853 4.731 14.0867 4.579 14.188C4.427 14.2893 4.275 14.359 4.123 14.397C3.971 14.435 3.8 14.454 3.61 14.454H3.192C3.04 14.4287 2.93233 14.4033 2.869 14.378C2.78033 14.378 2.68533 14.3463 2.584 14.283L2.337 14.131L2.166 13.903C2.128 13.8397 2.09633 13.7763 2.071 13.713L2.052 13.599C2.02667 13.5103 2.00133 13.39 1.976 13.238L1.957 12.82V6.778L0.893 6.816V12.744C0.893 13.1113 0.905667 13.371 0.931 13.523C0.943667 13.713 0.975333 13.9283 1.026 14.169L1.083 14.34C1.14633 14.5173 1.197 14.644 1.235 14.72C1.33633 14.8847 1.43767 15.0177 1.539 15.119C1.64033 15.2583 1.767 15.366 1.919 15.442C2.00767 15.5053 2.15333 15.575 2.356 15.651C2.60933 15.727 2.80567 15.7713 2.945 15.784C3.22367 15.8093 3.44533 15.822 3.61 15.822C3.85067 15.822 4.05333 15.7967 4.218 15.746C4.47133 15.67 4.655 15.6003 4.769 15.537C4.93367 15.461 5.09833 15.347 5.263 15.195C5.44033 15.043 5.586 14.891 5.7 14.739C5.87733 14.891 6.01033 14.9987 6.099 15.062C6.20033 15.1253 6.35233 15.2077 6.555 15.309C6.707 15.3977 6.859 15.4737 7.011 15.537L7.467 15.746L7.942 15.898L8.36 16.012L8.835 16.069C8.93633 16.0817 9.01233 16.088 9.063 16.088H9.101ZM17.347 10.141L18.297 9.191L17.347 8.26L16.416 9.191L17.347 10.141ZM14.098 14.435C13.9333 14.435 13.813 14.435 13.737 14.435C13.6737 14.4223 13.5787 14.4033 13.452 14.378C13.4013 14.378 13.338 14.3653 13.262 14.34C13.186 14.302 13.1227 14.2703 13.072 14.245H13.11C13.072 14.2197 13.0277 14.1817 12.977 14.131L12.901 13.998L12.882 13.846L12.844 13.675C12.844 13.5483 12.8567 13.447 12.882 13.371V13.314C12.9073 13.2 12.9327 13.1113 12.958 13.048L13.072 12.763C13.148 12.6363 13.205 12.5477 13.243 12.497C13.319 12.3957 13.376 12.326 13.414 12.288L13.642 12.117L13.87 12.003L14.003 11.984H14.155C14.2817 11.984 14.3703 11.9903 14.421 12.003L14.668 12.117C14.7947 12.193 14.8897 12.2563 14.953 12.307C15.0163 12.3577 15.0797 12.44 15.143 12.554C15.2063 12.6173 15.2697 12.7313 15.333 12.896C15.409 13.048 15.466 13.1873 15.504 13.314C15.5547 13.466 15.5927 13.6307 15.618 13.808L15.675 14.378C15.371 14.4033 15.124 14.4223 14.934 14.435C14.7567 14.435 14.478 14.435 14.098 14.435ZM6.973 14.169L7.011 14.188C6.90967 14.1373 6.802 14.074 6.688 13.998L6.555 13.903L6.422 13.789L6.517 13.637L6.821 13.2C6.92233 13.048 6.99833 12.9403 7.049 12.877L7.258 12.63C7.30867 12.554 7.38467 12.4653 7.486 12.364L7.676 12.193C7.77733 12.1297 7.85967 12.0853 7.923 12.06C7.98633 12.0347 8.056 12.022 8.132 12.022C8.17 12.022 8.22067 12.0283 8.284 12.041L8.36 12.06L8.588 12.136C8.68933 12.212 8.75267 12.2627 8.778 12.288C8.816 12.3133 8.86667 12.3513 8.93 12.402L9.006 12.478C9.044 12.5287 9.101 12.6173 9.177 12.744C9.22767 12.82 9.272 12.9213 9.31 13.048L9.424 13.428C9.43667 13.5167 9.443 13.656 9.443 13.846L9.424 14.131C9.424 14.245 9.41767 14.3273 9.405 14.378H9.386C9.386 14.454 9.367 14.53 9.329 14.606L9.234 14.834L8.816 14.777L8.417 14.701L8.474 14.72C8.19533 14.6567 7.93567 14.5807 7.695 14.492C7.60633 14.4667 7.47967 14.416 7.315 14.34L6.973 14.169ZM20.539 10.141L19.38 10.369L19.513 11.167C19.5637 11.509 19.5953 11.7877 19.608 12.003C19.6333 12.2057 19.6587 12.5097 19.684 12.915C19.7093 13.2063 19.7093 13.5167 19.684 13.846L19.285 14.055C19.2343 14.0803 19.1583 14.1057 19.057 14.131L18.924 14.169L18.772 14.226L18.221 14.302L17.632 14.34H16.701C16.701 14.074 16.682 13.8143 16.644 13.561C16.606 13.295 16.549 13.048 16.473 12.82L16.492 12.858L16.264 12.269C16.1373 12.0157 16.036 11.832 15.96 11.718V11.737C15.8587 11.5723 15.751 11.433 15.637 11.319C15.4597 11.167 15.3203 11.0593 15.219 10.996H15.2C15.0353 10.9073 14.877 10.8503 14.725 10.825C14.5857 10.787 14.421 10.768 14.231 10.768H14.193C14.0537 10.768 13.9207 10.787 13.794 10.825C13.6673 10.863 13.528 10.9263 13.376 11.015C13.224 11.091 13.091 11.1797 12.977 11.281C12.825 11.433 12.7173 11.5533 12.654 11.642C12.5527 11.7813 12.4513 11.9333 12.35 12.098C12.2613 12.2627 12.1853 12.44 12.122 12.63V12.649C12.046 12.8137 11.989 13.0037 11.951 13.219C11.9257 13.4977 11.913 13.7067 11.913 13.846C11.913 14.0613 11.9257 14.2197 11.951 14.321C11.9763 14.4983 12.0207 14.6377 12.084 14.739C12.0967 14.853 12.1473 14.9607 12.236 15.062L12.35 15.195L12.483 15.309C12.5843 15.385 12.6857 15.4483 12.787 15.499C12.901 15.5497 13.0213 15.5813 13.148 15.594L13.547 15.651C13.6483 15.6637 13.8003 15.67 14.003 15.67H14.915C15.2697 15.6447 15.5293 15.6193 15.694 15.594L15.637 15.632L15.599 15.746V15.917L15.58 15.955C15.4407 16.1703 15.257 16.3857 15.029 16.601C14.801 16.8037 14.5857 16.9747 14.383 17.114L14.364 17.133C14.2373 17.209 14.136 17.266 14.06 17.304C13.908 17.38 13.794 17.4307 13.718 17.456H13.699C13.585 17.5193 13.4837 17.5573 13.395 17.57L13.129 17.589C13.0277 17.589 12.9453 17.5827 12.882 17.57C12.8313 17.57 12.749 17.5573 12.635 17.532H12.578C12.4387 17.5193 12.274 17.4877 12.084 17.437C11.9193 17.399 11.7737 17.342 11.647 17.266L11.666 17.304L11.343 18.064C11.4823 18.14 11.685 18.2287 11.951 18.33L12.084 18.387L12.673 18.596L12.768 18.615C12.9327 18.653 13.0593 18.6783 13.148 18.691L13.243 18.71C13.3697 18.7227 13.4647 18.729 13.528 18.729C13.5913 18.729 13.699 18.7163 13.851 18.691L14.269 18.539C14.3957 18.4883 14.5413 18.4123 14.706 18.311C14.9087 18.1843 15.067 18.0767 15.181 17.988C15.3837 17.8107 15.5357 17.6713 15.637 17.57C15.7763 17.4053 15.9157 17.228 16.055 17.038C16.1943 16.8607 16.3147 16.6517 16.416 16.411C16.5173 16.1577 16.587 15.917 16.625 15.689V15.67H17.632C17.9487 15.67 18.1767 15.6573 18.316 15.632C18.4933 15.6193 18.696 15.5877 18.924 15.537C19.1647 15.4863 19.3483 15.4357 19.475 15.385C19.6017 15.3343 19.7347 15.2647 19.874 15.176C20.064 15.062 20.2033 14.9417 20.292 14.815C20.444 14.6123 20.5453 14.4477 20.596 14.321C20.6847 14.1183 20.7417 13.9283 20.767 13.751C20.805 13.561 20.824 13.3583 20.824 13.143C20.824 12.5477 20.7987 12.022 20.748 11.566C20.6973 11.148 20.653 10.8123 20.615 10.559L20.539 10.141Z" fill="#202223"></path></svg>
                                                        </div>
                                                        {product.available ? (
                                                                <div className="text-green-600">موجود</div>
                                                        ) : (
                                                                <div className="text-red-600">اتمام موجودی</div>
                                                        )}
                                                </div>
                                        </div>
                                </div>
                        ));
        };
        return (
                <div className="my-10">
                        {props.Hashtag.map(hashtag => (
                                <div className="my-10" id={hashtag.hashtag} key={hashtag._id}>
                                        <h2 className="text-xl font-bold my-4 mx-5 sm:mx-10 text-titleColor">{hashtag.hashtag}</h2>
                                        <div className="flex flex-wrap justify-center gap-4">
                                                {renderProductsByHashtag(hashtag.hashtag)}
                                        </div>
                                </div>
                        ))}
                </div>
        );
}
